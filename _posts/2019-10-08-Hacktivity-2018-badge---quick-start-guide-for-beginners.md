---           
layout: post
title: Hacktivity 2018 badge - quick start guide for beginners
date: 2019-10-08 15:57:50 UTC
updated: 2019-10-08 15:57:50 UTC
comments: false
categories: badge hacking hacktivity HW hacking
---
<div class="separator" style="">You either landed on this blog post because </div><div class="separator" style=""></div><ul><li>you are a huge fan of Hacktivity</li><li>you bought this badge around a year ago</li><li>you are just interested in hacker conference badge hacking. </li></ul><div class="separator" style="">or maybe all of the above. Whatever the reasons, this guide should be helpful for those who never had any real-life experience with these little gadgets. </div><div class="separator" style="">But first things first, here is a list what you need for hacking the badge:</div><div class="separator" style=""></div><ul><li>a computer with USB port and macOS, Linux or Windows. You can use other OS as well, but this guide covers these</li><li>USB mini cable to connect the badge to the computer</li><li>the Hacktivity badge from 2018</li></ul><div>By default, this is how your badge looks like.</div><br/><div style=""><img border="0" data-original-height="1600" data-original-width="1200" height="400" src="https://1.bp.blogspot.com/-UlzaEtfpOYE/XX-e5u93xLI/AAAAAAAAC14/BjO2ro3IZ_UqSQMf2p532VHJNmZ069vzACLcBGAsYHQ/s400/IMG_8640.JPG" width="300"/></div><div class="separator" style=""><br/></div><h2 style="clear: both; text-align: justify;">Let's get started</h2><div class="separator" style="">Luckily, you don't need any soldering skills for the first steps. Just connect the USB mini port to the bottom left connector on the badge, connect the other part of the USB cable to your computer, and within some seconds you will be able to see that the lights on your badge are blinking. So far so good. </div><div class="separator" style=""><br/></div><div class="separator" style="">Now, depending on which OS you use, you should choose your destiny here.</div><h3 style="text-align: justify;">Linux</h3><div style="">The best source of information about a new device being connected is</div><div style=""># dmesg</div><div style=""><br/></div><div style="">The tail of the output should look like</div><pre style="text-align: justify;">[267300.206966] usb 2-2.2: new full-speed USB device number 14 using uhci_hcd<br/>[267300.326484] usb 2-2.2: New USB device found, idVendor=0403, idProduct=6001<br/>[267300.326486] usb 2-2.2: New USB device strings: Mfr=1, Product=2, SerialNumber=3<br/>[267300.326487] usb 2-2.2: Product: FT232R USB UART<br/>[267300.326488] usb 2-2.2: Manufacturer: FTDI<br/>[267300.326489] usb 2-2.2: SerialNumber: <b>AC01U4XN</b><br/>[267300.558684] usbcore: registered new interface driver usbserial_generic<br/>[267300.558692] usbserial: USB Serial support registered for generic<br/>[267300.639673] usbcore: registered new interface driver ftdi_sio<br/>[267300.639684] usbserial: USB Serial support registered for FTDI USB Serial Device<br/>[267300.639713] ftdi_sio 2-2.2:1.0: FTDI USB Serial Device converter detected<br/>[267300.639741] usb 2-2.2: Detected FT232RL<br/>[267300.643235] usb 2-2.2: FTDI USB Serial Device converter now attached to <b>ttyUSB0</b><br/></pre><div style=""><br/></div><div style="">Dmesg is pretty kind to us, as it even notifies us that the device is now attached to ttyUSB0. </div><div style=""><br/></div><div style="">From now on, connecting to the device is exactly the same as it is in the macOS section, so please find the "Linux users, read it from here" section below. </div><h3 style="clear: both; text-align: justify;">macOS</h3><div class="separator" style="">There are multiple commands you can type into Terminal to get an idea about what you are looking at. One command is:</div><div class="separator" style=""> </div><div><pre># ioreg -p IOUSB -w0 -l</pre></div><div><br/></div><div>With this command, you should get output similar to this:</div><div> <br/><pre>+-o FT232R USB UART@14100000  &lt;class AppleUSBDevice, id 0x100005465, registered, matched, active, busy 0 (712 ms), retain 20&gt;<br/>    |   {<br/>    |     "sessionID" = 71217335583342<br/>    |     "iManufacturer" = 1<br/>    |     "bNumConfigurations" = 1<br/>    |     "idProduct" = 24577<br/>    |     "bcdDevice" = 1536<br/>    |     "Bus Power Available" = 250<br/>    |     "USB Address" = 2<br/>    |     "bMaxPacketSize0" = 8<br/>    |     "iProduct" = 2<br/>    |     "iSerialNumber" = 3<br/>    |     "bDeviceClass" = 0<br/>    |     "Built-In" = No<br/>    |     "locationID" = 336592896<br/>    |     "bDeviceSubClass" = 0<br/>    |     "bcdUSB" = 512<br/>    |     "USB Product Name" = "FT232R USB UART"<br/>    |     "PortNum" = 1<br/>    |     "non-removable" = "no"<br/>    |     "IOCFPlugInTypes" = {"9dc7b780-9ec0-11d4-a54f-000a27052861"="IOUSBFamily.kext/Contents/PlugIns/IOUSBLib.bundle"}<br/>    |     "bDeviceProtocol" = 0<br/>    |     "IOUserClientClass" = "IOUSBDeviceUserClientV2"<br/>    |     "IOPowerManagement" = {"DevicePowerState"=0,"CurrentPowerState"=3,"CapabilityFlags"=65536,"MaxPowerState"=4,"DriverPowerState"=3}<br/>    |     "kUSBCurrentConfiguration" = 1<br/>    |     "Device Speed" = 1<br/>    |     "USB Vendor Name" = "FTDI"<br/>    |     "idVendor" = 1027<br/>    |     "IOGeneralInterest" = "IOCommand is not serializable"<br/>    |     "USB Serial Number" = "<b>AC01U4XN</b>"<br/>    |     "IOClassNameOverride" = "IOUSBDevice"<br/>    |   } <br/></pre></div><div style="">The most important information you get is the USB serial number - AC01U4XN in my case.<br/>Another way to get this information is<br/><pre># system_profiler SPUSBDataType<br/><br/></pre>which will give back something similar to:<br/><pre>FT232R USB UART:<br/><br/>          Product ID: 0x6001<br/>          Vendor ID: 0x0403  (Future Technology Devices International Limited)<br/>          Version: 6.00<br/>          Serial Number: <b>AC01U4XN</b><br/>          Speed: Up to 12 Mb/sec<br/>          Manufacturer: FTDI<br/>          Location ID: 0x14100000 / 2<br/>          Current Available (mA): 500<br/>          Current Required (mA): 90<br/>          Extra Operating Current (mA): 0<br/></pre><div><br/></div><div>The serial number you got is the same.<br/><br/>What you are trying to achieve here is to connect to the device, but in order to connect to it, you have to know where the device in the /dev folder is mapped to. A quick and dirty solution is to list all devices under /dev when the device is disconnected, once when it is connected, and diff the outputs. For example, the following should do the job:<br/><br/><pre>ls -lha /dev/tty* &gt; plugged.txt<br/>ls -lha /dev/tty* &gt; np.txt<br/>vimdiff plugged.txt np.txt<br/></pre><br/>The result should be obvious, /dev/tty.usbserial-AC01U4XN is the new device in case macOS. In the case of Linux, it was /dev/ttyUSB0.<br/><h4>Linux users, read it from here. macOS users, please continue reading</h4>Now you can use either the built-in screen command or minicom to get data out from the badge. Usually, you need three information in order to communicate with a badge. Path on /dev (you already got that), speed in baud, and the async config parameters. Either you can guess the speed or you can Google that for the specific device. Standard baud rates include 110, 300, 600, 1200, 2400, 4800, 9600, 14400, 19200, 38400, 57600, 115200, 128000 and 256000 bits per second. I usually found 1200, 9600 and 115200 a common choice, but that is just me.<br/>Regarding the async config parameters, the default is that <b>8</b> bits are used, there is <b>n</b>o parity bit, and <b>1</b> stop bit is used. The short abbreviation for this is 8n1. In the next example, you will use the screen command. By default, it uses 8n1, but it is called cs8 to confuse the beginners.<br/><br/>If you type:<br/># screen /dev/tty.usbserial-AC01U4XN 9600<br/>or<br/># screen /dev/ttyUSB0 9600<br/>and wait for minutes and nothing happens, it is because the badge already tried to communicate via the USB port, but no-one was listening there. Disconnect the badge from the computer, connect again, and type the screen command above to connect. If you are quick enough you can see that the amber LED will stop blinking and your screen command is greeted with some interesting information. By quick enough I mean ˜90 seconds, as it takes the device 1.5 minutes to boot the OS and the CTF app.<br/><h3>Windows</h3><div>When you connect the device to Windows, you will be greeted with a pop-up.</div><div class="separator" style=""><a href="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B17.52.32.png" src="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B17.52.32.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="124" data-original-width="488" height="" src="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B17.52.32.png" width="400"/></a></div><div class="separator" style=""><br/></div><div class="separator" style="">Just click on the popup and you will see the COM port number the device is connected to:</div><br/><div class="separator" style=""><a href="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B17.52.55.png" src="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B17.52.55.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="269" data-original-width="663" height="" src="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B17.52.55.png" width="400"/></a></div><div class="separator" style=""><br/></div><div class="separator" style="">In this case, it is connected to COM3. So let's fire up our favorite putty.exe, select Serial, choose COM3, add speed 9600, and you are ready to go!</div><br/><div class="separator" style=""><a href="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B18.22.04.png" src="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B18.22.04.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="308" data-original-width="710" height="" src="https://z6543.github.io/_img/Screen2BShot2B2019-09-162Bat2B18.22.04.png" width="400"/></a></div><br/>You might check the end of the macOS section in case you can't see anything. Timing is everything.<br/><br/><h2>The CTF</h2><pre>Welcome to the Hacktivity 2018 badge challenge!<br/><br/>This challenge consists of several tasks with one or more levels of<br/>difficulty. They are all connected in some way or another to HW RE<br/>and there's no competition, the whole purpose is to learn things.<br/><br/>Note: we recommend turning on local echo in your terminal!<br/>Also, feel free to ask for hints at the Hackcenter!<br/><br/>Choose your destiny below:<br/><br/>  1. Visual HW debugging<br/>  2. Reverse engineering<br/>  3. RF hacking<br/>  4. Crypto protection<br/><br/>Enter the number of the challenge you're interested in and press [<br/></pre></div></div><div style="">Excellent, now you are ready to hack this! In case you are lost in controlling the screen command, go to <a href="https://linuxize.com/post/how-to-use-linux-screen/">https://linuxize.com/post/how-to-use-linux-screen/</a>.<br/><br/>I will not spoil any fun in giving out the challenge solutions here. It is still your task to find solutions for these.<br/><br/>But here is a catch. You can get a root shell on the device. And it is pretty straightforward. Just carefully remove the Omega shield from the badge. Now you see two jumpers; by default, these are connected together as UART1. As seen below.</div><div style=""><br/></div><div class="separator" style=""><a href="https://z6543.github.io/_img/IMG_8641.JPG" src="https://z6543.github.io/_img/IMG_8641.JPG" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="1600" data-original-width="1200" height="" src="https://z6543.github.io/_img/IMG_8641.JPG" width="300"/></a></div><div class="separator" style=""><br/></div><div class="separator" style=""><br/></div><div class="separator" style="">But what happens if you move these jumpers to UART0? Guess what, you can get a root shell! This is what I call privilege escalation on the HW level :) But first, let's connect the Omega shield back. Also, for added fun, this new interface speaks on 115200 baud, so you should change your screen parameters to 115200. Also, the new interface has a different ID under /dev, but I am sure you can figure this out from now on.</div><div class="separator" style=""><br/></div><div class="separator" style=""><br/></div><div class="separator" style=""><img border="0" data-original-height="1600" data-original-width="1200" height="400" src="https://1.bp.blogspot.com/-1D5QwDrWYFk/XX-e6RYor6I/AAAAAAAAC2A/Y-8CYuLF98UiAUsjL69i84Xo4kO6oXDqwCLcBGAsYHQ/s400/IMG_8642.JPG" width="300"/></div><div class="separator" style=""><br/></div><div class="separator" style=""><span style="text-align: justify;"><br/></span></div><div class="separator" style=""><span style="text-align: justify;">If you connect to the device during boot time, you can see a lot of exciting debug information about the device. And after it boots, you just get a root prompt. Woohoo! </span></div><div class="separator" style=""><span style="text-align: justify;">But what can you do with this root access? Well, for starters, how about running </span></div><div class="separator" style=""><span style="text-align: justify;"># strings hello | less</span></div><div class="separator" style=""><span style="text-align: justify;"><br/></span></div><div class="separator" style=""><span style="text-align: justify;">From now on, you are on your own to hack this badge. Happy hacking.</span></div><div class="separator" style=""><span style="text-align: justify;">Big thanks to <a href="https://twitter.com/0xmaro" target="_blank">Attila Marosi-Bauer</a> and <a href="https://hsbp.org/HomePage" target="_blank">Hackerspace Budapest</a> for developing this badge and the contests.</span></div><div class="separator" style=""><span style="text-align: justify;"><br/></span></div><div class="separator" style=""><span style="text-align: justify;">PS: In case you want to use the radio functionality of the badge, see below how you should solder the parts to it. By default, you can process slow speed radio frequency signals on GPIO19. But for higher transfer speeds, you should wire the RF module DATA OUT pin with the RX1 free together.</span></div><div class="separator" style=""><span style="text-align: justify;"><br/></span></div><div class="separator" style=""><a href="https://z6543.github.io/_img/IMG_8638.JPG" src="https://z6543.github.io/_img/IMG_8638.JPG" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="1600" data-original-width="1200" height="" src="https://z6543.github.io/_img/IMG_8638.JPG" width="300"/></a></div><div style=""><br/></div><div style=""><br/></div>